<% if (flow) { %>// @flow
<% } %>import * as React from 'react';
import { Form<% if (flow) { %>, type FormProps<% } %> } from '@saritasa/react-form';

import { <%= Name %>View } from './<%= Name %>.view';
import { <%= name %>FieldRules, validate<%= Name %><% if (flow) { %>, type <%= Name %>Values<% } %> } from './<%= Name %>.values';

/**
 * Module with controller for <%= Name %> component.
 *
 * @module <%= moduleName %>/controller
 */
<% if (flow) { %>
/**
 * Shape of props for <%= Name %>Controller.
 *
 * @memberof <%= moduleName %>/controller
 */
type <%= Name %>ControllerProps = {
  onSubmit: $PropertyType<FormProps<<%= Name %>Values>, 'onSubmit'>
};

/**
 * Shape of <%= Name %>Controller's State.
 *
 * @memberof <%= moduleName %>/controller
 */
type <%= Name %>ControllerState = null;

/**
 * Shape of <%= Name %>Props for Form component to render <%= Name %>View.
 *
 * @memberof <%= moduleName %>/controller
 */
type <%= Name %>Props = {
  ...$Exact<React.ElementProps<typeof <%= Name %>View>,
  ...$Exact<FormProps<<%= Name %>Values>>,
};
<% } %>
/**
 * Controller for <%= Name %> form.
 *
 * @extends React.PureComponent
 * @memberof <%= moduleName %>/controller
 */
export class <%= Name %>Controller extends React.PureComponent<% if (flow) { %><<%= Name %>ControllerProps, <%= Name %>ControllerState><% } %> {
  // Uncomment default props if need
  // static defaultProps = {};

  /**
   * Method to generate properties for view part of component.
   *
   * @returns {<%= Name %>ViewProps} Props for view part of component.
   * @memberof <%= moduleName %>/controller.<%= Name %>Controller#
   */
  getViewProps()<% if (flow) { %>: React.ElementProps<typeof <%= Name %>View><% } %> {
    return { formName: '<%= Name %>' };
  }

  /**
   * Method to generate properties for form's view part's wrapper.
   *
   * @returns {<%= Name %>Props} Props for form's view part's wrapper.
   * @memberof <%= moduleName %>/controller.<%= Name %>Controller#
   */
  getFormProps()<% if (flow) { %>: $Exact<<%= Name %>Props><% } %> {
    const { onSubmit } = this.props;

    return {
      ...this.getViewProps(),
      onSubmit,
      component: <%= Name %>View,
      fieldRules: <%= name %>FieldRules,
      validate: validate<%= Name %>,
    };
  }

  /**
   * React's method to render component.
   *
   * Renders form with view part of component.
   *
   * @returns {?React.Node} Form with view part of <%= Name %> or possible `null`.
   * @memberof <%= moduleName %>/controller.<%= Name %>Controller#
   */
  render() {
    return React.createElement(Form, this.getFormProps());
  }
}
